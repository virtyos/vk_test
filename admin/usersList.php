<?php  require_once('../modules/AppModule.php');  require_once('../modules/AuthModule.php');    require_once('../libs/Templater.php');  $renderParams = array();    require_once('../models/UserModel.php');  require_once('../models/UserSiteModel.php');    $userId = getGetParam('user');  $user = null;  if ($userId) {    $user = \UserModel\select(array('conditions' => 'id = :id', 'params' => array(':id' => $userId)));  }  //if it's no such user  if (!$user) {    throw new Exception('no such user');    die();  }  $user = $user[0];    $renderParams['user'] = $user;    $userStats = \UserSiteModel\select(array(    'conditions' => 'id_user = :id_user  AND date_visit BETWEEN :start_date AND DATE_ADD(:end_date, INTERVAL 1 DAY)',    'params' => array(      ':id_user' => $user['id'],      ':start_date' => date('Y-m-d', (time() - 7*24*3600)),      ':end_date' => date('Y-m-d'),    )  ));    $renderParams['userStats'] = $userStats;    tplRender('sitePage', $renderParams);  